<section class="card">
  <div class="header-row">
    <h2 class="card-title">Your Bills</h2>

    <button routerLink="/user-account/bills/add-bill" class="cta-button">Add Bill</button>
  </div>

  <p class="muted" *ngIf="!bills?.length && !loading">No bills yet. Click “Add Bill” to upload one.</p>
  <p class="error" *ngIf="error">{{ error }}</p>

  <div class="table-wrap" *ngIf="bills?.length">
    <table>
      <thead>
      <tr>
        <th>Bill Date</th>
        <th>Due Date</th>
        <th>Paid</th>
        <th>Water Use</th>
        <th>Sewer Use</th>
        <th>Water Charges</th>
        <th>Sewer Charges</th>
        <th>Fees</th>
        <th>Total Cost</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let b of bills" >
        <td *ngIf="b && hasData(b)">{{ b.billDate | date:'MMM d, y' }}</td>
        <td *ngIf="b && hasData(b)">{{ b.dueDate | date: 'MMM d, y'}}</td>
        <td *ngIf="b && hasData(b)"><input type="checkbox" [checked]="b.paid" [disabled]="!b.paid" /></td>

        <td *ngIf="b && hasData(b)">{{ b.waterUsage }}</td>
        <td *ngIf="b && hasData(b)">{{ b.sewerUsage}}</td>
        <td *ngIf="b && hasData(b)">{{ b.waterCharge | currency }}</td>
        <td *ngIf="b && hasData(b)">{{ b.sewerCharge | currency }}</td>
        <td *ngIf="b && hasData(b)">{{ b.fees }}</td>
        <td class="actions-cell">
          <button class="btn" (click)="viewBill(b)">View</button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="loading" class="skeleton">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>
</section>
<router-outlet/>
